<!--  This file is app/views/events/index.html.erb -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<body style="font-family: courier new">

<div class="navbar navbar-dark bg-dark shadow-sm ">
    <h2 style="color: white">Lasso! - Stay in the Loop.</h2>
  </div>
</div>

<div class="container mt-4">
<div class="row">
<div class="col-2">

<div class="card">
    <div class="card-header">
       <h3 style="text-align:center">Events Filter</h3>
    </div>
    <div class="card-body">
      <%= form_tag events_path, method: :get, id: 'categories_form' do %>
        <%= hidden_field_tag 'sort_by', @sort_by %>
        Include:
      
        <% @all_categories.each do |category| %>
            <li class="list-group-item border-0 text-center">
              <div class="form-check  form-check-inline align-items-center">
                <%= label_tag "categories[#{category}]", category, class: 'form-check-label' %>
                <%= check_box_tag "categories[#{category}]", '1', (@categories_to_show_hash.include?(category)),
                  class: 'form-check-input' %>
              </div>
            </li>
        <% end %>
        <%= submit_tag 'Refresh', id: 'categories_submit', class: 'btn btn-info' %>
      <% end %>
    </div>
  </div>
</div>

<div class="col-10">
  <div class="card">
    <div class="card_body justify-content-center">
      <%= month_calendar(events: @meetings) do |date, meetings| %>
        <%= date %>
          <% meetings.each do |meeting| %>
          <div>
            <%= link_to "#{meeting.title}", event_path(meeting.id)  %>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
  <div class="card">
    <div class="card-header">
       Have an event you want loop Columbia in about?
    </div>
    <div class="card-body">
      <%= link_to 'Add new event!', new_event_path, :class => 'btn btn-info' %>
      <%= link_to 'Search new event!', new_event_path, :class => 'btn btn-info' %>
    </div>
  </div>

  <%# Authentication %>
  <div class="card">
    <div class="card-header">
       Account
    </div>
    <div class="card-body">
      <%= link_to 'Register', '/register', :class => 'btn btn-info' %>
      
      <%# display button based on sign-in status %>
      <% if current_user %>
        <%= link_to 'Switch account', '/sign_in', :class => 'btn btn-info' %>
      <% else %>
        <%= link_to 'Sign in', '/sign_in', :class => 'btn btn-info' %>
      <% end %>

      <%= link_to 'Sign out', '/sign_out', :class => 'btn btn-info' %>
    </div>
  </div>
</div>
